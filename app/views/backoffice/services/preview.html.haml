- content_for :title, "#{@service.name} preview"
- breadcrumb :backoffice_service_preview, @service
.corner-ribbon
  Service preview
.container.mb-4
  .row
    .col.text-right
      .btn-group
        - if @service.persisted?
          = link_to _("Go back to edit"), edit_backoffice_service_path(@service),
            class: "btn btn-warning"
          = link_to _("Confirm changes"), backoffice_service_path(@service),
            class: "btn btn-success", method: :put
        - else
          = link_to _("Go back to edit"), new_backoffice_service_path,
            class: "btn btn-warning",
             data: { e2e: "go-back-edit-btn" }
          = link_to _("Confirm changes"), backoffice_services_path,
            class: "btn btn-success", method: :post,
            data: { e2e: "confirm-changes-btn" }
.container{ "data-controller": "preview" }
  .container.preview
    .pt-4.pl-3.pr-3.shadow-sm.rounded.service-box.service-detail
      = render Presentable::HeaderComponent.new(object: @service,
                            title: @service.name,
                            abbreviation: @service.abbreviation,
                            subtitle: @service.tagline,
                            comparison_enabled: @comparison_enabled,
                            preview: true,
                            question: @question,
                            favourite_services: @favourite_services) do |c|
        - c.buttons do
          = render "components/presentable/header_component/order_buttons", service: @service, preview: true
      = render "services/tabs", service: @service, preview: true

  .tab-content
    #about{ "data-target": "preview.content" }
      = render Presentable::DescriptionComponent.new(object: @service, preview: true) do |c|
        - c.description_panels do
          - if policy(@service).order? && (policy(@service).offers_show? || policy(@service).bundles_show?)
            = render "services/offers", offers: @offers, service: @service,
                                        bundles: @bundles, bundled: @bundled, preview: local_assigns[:preview]
      = render "taggable/details_section", taggable: @service, preview: true
    #details.d-none{ "data-target": "preview.content" }
      = render Presentable::DetailsComponent.new(@service, preview: true)

  .container.mt-4.pt-4.related-container
    = render "services/related", related_services: @related_services, title: related_services_title, preview: true
