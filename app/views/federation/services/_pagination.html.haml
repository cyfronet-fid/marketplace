- return unless pagination && pagination["total_pages"] > 1

.row.mt-4
  .col-12
    %nav{ "aria-label": "Federation services pagination" }
      %ul.pagination.justify-content-center.mb-0
        :ruby
          current_page = pagination["current_page"]
          total_pages = pagination["total_pages"]
          per_page = pagination["per_page"]
          total_count = pagination["total_count"]

        / Previous page link
        - if current_page > 1
          %li.page-item
            %a.page-link{ href: federation_services_path(params.to_unsafe_h.except(:page).merge(page: current_page - 1)),
                           "aria-label": "Previous" }
              %span{ "aria-hidden": "true" } &laquo;
              %span.sr-only Previous
        - else
          %li.page-item.disabled
            %span.page-link{ "aria-label": "Previous" }
              %span{ "aria-hidden": "true" } &laquo;
              %span.sr-only Previous

        / First page
        - if current_page > 3
          %li.page-item
            %a.page-link{ href: federation_services_path(params.to_unsafe_h.except(:page).merge(page: 1)) }
              1
          - if current_page > 4
            %li.page-item.disabled
              %span.page-link ...

        / Page numbers around current page
        - start_page = [current_page - 2, 1].max
        - end_page = [current_page + 2, total_pages].min

        - (start_page..end_page).each do |page|
          - if page == current_page
            %li.page-item.active{ "aria-current": "page" }
              %span.page-link
                = page
                %span.sr-only (current)
          - else
            %li.page-item
              %a.page-link{ href: federation_services_path(params.to_unsafe_h.except(:page).merge(page: page)) }
                = page

        / Last page
        - if current_page < total_pages - 2
          - if current_page < total_pages - 3
            %li.page-item.disabled
              %span.page-link ...
          %li.page-item
            %a.page-link{ href: federation_services_path(params.to_unsafe_h.except(:page).merge(page: total_pages)) }
              = total_pages

        / Next page link
        - if current_page < total_pages
          %li.page-item
            %a.page-link{ href: federation_services_path(params.to_unsafe_h.except(:page).merge(page: current_page + 1)),
                           "aria-label": "Next" }
              %span{ "aria-hidden": "true" } &raquo;
              %span.sr-only Next
        - else
          %li.page-item.disabled
            %span.page-link{ "aria-label": "Next" }
              %span{ "aria-hidden": "true" } &raquo;
              %span.sr-only Next

    / Pagination info
    .text-center.mt-2
      %small.text-muted
        - start_item = ((current_page - 1) * per_page) + 1
        - end_item = [current_page * per_page, total_count].min
        Showing #{start_item} to #{end_item} of #{total_count} services
