:ruby
  content_for :title, "Service comparison"
  i = 3 - @services&.size
  breadcrumb :comparison
.container
  %table.services-comparison.bordered.shadow-sm.table-responsive
    %thead
      %tr
        %th{ colspan: 4 }
          Comparison
          %span.float-right.font-weight-light.text-uppercase
            = link_to "Clear all", comparisons_path, method: :delete
    %tbody
      %tr
        %th.title-col
        - @services.each do |service|
          %th.title-col
            .logo-wrapper
              %span.helper
              - if service.logo.attached? && service.logo.variable?
                = image_tag service.logo.variant(resize: "100x100")
            = link_to comparisons_services_path(slug: service.slug, fromc: params[:fromc]), method: :delete do
              %i.far.fa-trash-alt
            .service-title
              = link_to service.name.truncate(30, separator: " "),
              service_path(service, fromc: params[:fromc], comp_link: true)
            .service-description
              = service.description.truncate(80, separator: " ")
        - i.times do
          %td.title-col.empty.text-uppercase
            = link_to "Add next resource", services_path
      %tr
        %th Providers
        - @services.each do |service|
          %td= service.providers.map { |p| p.name }.join(", ")
      %tr.lightgrey-row
        %th Resource order type
        - @services.each do |service|
          %td
            %span{ "data-toggle": "tootltip",
                   "title": "#{t("project_items.order_type.#{order_type(service)}.tooltip")}" }
              = t("offers.type.#{order_type(service)}")
      %tr
        %th Scientific domain
        - @services.each do |service|
          %td= service.scientific_domains .map { |sd| sd.name }.join(", ")
      %tr.lightgrey-row
        %th Dedicated for
        - @services.each do |service|
          %td= service.target_users.map { |tg| tg.name }.join(", ")
      %tr
        %th Resource life cycle status
        - @services.each do |service|
          - if service.life_cycle_status.present?
            %td= service.life_cycle_status.first.name
      %tr.lightgrey-row
        %th Geographical availabilities
        - @services.each do |service|
          %td= service.geographical_availabilities.join(", ")
      %tr
        %th Languages
        - @services.each do |service|
          %td
            %ul
            - service.language_availability.each do |language|
              %li= I18nData.languages[language.upcase] || language

      %tr.lightgrey-row
        %th Tags
        - @services.each do |service|
          %td
            - service.tag_list.sort.each do |tag|
              = link_to tag, services_path(tag: tag), class: "badge badge-light"
